{"version":3,"sources":["../../../src/lib/app/manager.js"],"names":["findAll","queryOptions","options","count","removed","total","find","limit","skip","offset","sort","createdAt","list","meta","length","recordById","appId","findById","analyse","hits","save","result","insert","create"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA,IAAMA;AAAA,sFAAU;AAAA,QAAOC,YAAP,uEAAsB,EAAtB;AAAA,QAA0BC,OAA1B,uEAAoC,EAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACM,gBAAMC,KAAN,CAAY,EAAEC,SAAS,KAAX,EAAZ,CADN;;AAAA;AACRC,iBADQ;;AAEdH,sBAAU,sBAAcA,OAAd,EAAuB,EAAEE,SAAS,KAAX,EAAvB,CAAV;AAFc;AAAA,mBAGK,gBAAME,IAAN,CAAWJ,OAAX,EAAoBK,KAApB,CAA0BN,aAAaM,KAAvC,EAA8CC,IAA9C,CAAmDP,aAAaQ,MAAhE,EAAwEC,IAAxE,CAA6E,EAAEC,WAAW,CAAC,CAAd,EAA7E,CAHL;;AAAA;AAGRC,gBAHQ;AAAA,6CAIP;AACLC,oBAAM,yBAAQR,KAAR,EAAeO,KAAKE,MAApB,EAA4Bb,YAA5B,CADD;AAELW;AAFK,aAJO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAV;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAUA,IAAMG;AAAA,uFAAa,kBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACG,gBAAMC,QAAN,CAAeD,KAAf,CADH;;AAAA;AACbE,mBADa;;AAAA,gBAEZA,OAFY;AAAA;AAAA;AAAA;;AAAA,8CAGN,IAHM;;AAAA;AAKjB,cAAEA,QAAQC,IAAV;AALiB;AAAA,mBAMID,QAAQE,IAAR,EANJ;;AAAA;AAMXC,kBANW;AAAA,8CAOVA,MAPU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAUA,IAAMC;AAAA,uFAAS;AAAA,QAAOpB,OAAP,uEAAiB,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACQ,gBAAMqB,MAAN,CAAa,sBAAc,EAAd,EAAkBrB,OAAlB,CAAb,CADR;;AAAA;AACPmB,kBADO;AAAA,8CAENA,MAFM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAT;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAKe;AACbrB,kBADa;AAEbe,wBAFa;AAGbO;AAHa,C","file":"manager.js","sourcesContent":["import Model from './model'\nimport { getMeta } from '../util/pagination'\n\nconst findAll = async (queryOptions = {}, options = {}) => {\n  const total = await Model.count({ removed: false })\n  options = Object.assign(options, { removed: false })\n  const list = await Model.find(options).limit(queryOptions.limit).skip(queryOptions.offset).sort({ createdAt: -1 })\n  return {\n    meta: getMeta(total, list.length, queryOptions),\n    list\n  }\n}\n\nconst recordById = async (appId) => {\n  let analyse = await Model.findById(appId)\n  if (!analyse) {\n      return null\n  }\n  ++analyse.hits\n  const result = await analyse.save()\n  return result\n}\n\nconst insert = async (options = {}) => {\n  const result = await Model.create(Object.assign({}, options))\n  return result\n}\n\nexport default {\n  findAll,\n  recordById,\n  insert\n}\n"]}