{"version":3,"sources":["../../../src/lib/util/pagination.js"],"names":["getFromReq","query","defaultLimit","offset","parseInt","isNaN","limit","getMeta","totalLength","currentLength","pagination","total","length","remaining"],"mappings":";;;;;AAAA;;;AAGA,IAAMA,aAAa,SAAbA,UAAa,GAA8B;AAAA,MAA7BC,KAA6B,uEAArB,EAAqB;AAAA,MAAjBC,YAAiB;;AAC/C,MAAIC,SAASC,SAASH,MAAME,MAAf,EAAuB,EAAvB,CAAb;AACA,MAAIE,MAAMF,MAAN,KAAiBA,SAAS,CAA9B,EAAiC;AAC/BA,aAAS,CAAT;AACD;AACD,MAAIG,QAAQF,SAASH,MAAMK,KAAf,EAAsB,EAAtB,CAAZ;AACA,MAAID,MAAMC,KAAN,KAAgBA,UAAU,CAA1B,IAA+BA,QAAQ,CAAC,CAAxC,IAA6CA,QAAQJ,YAAzD,EAAuE;AACrEI,YAAQJ,YAAR;AACD;AACD,SAAO;AACLC,kBADK;AAELG;AAFK,GAAP;AAID,CAbD;;AAeA,IAAMC,UAAU,SAAVA,OAAU,CAACC,WAAD,EAAcC,aAAd,EAA6BC,UAA7B,EAA4C;AAC1D,SAAO;AACLP,YAAQO,WAAWP,MADd;AAELG,WAAOI,WAAWJ,KAFb;AAGLK,WAAOH,WAHF;AAILI,YAAQH,aAJH;AAKLI,eAAWJ,kBAAkB,CAAlB,GAAsB,CAAtB,GAA0BD,cAAcE,WAAWP,MAAzB,GAAkCM;AALlE,GAAP;AAOD,CARD;;QAWET,U,GAAAA,U;QACAO,O,GAAAA,O","file":"pagination.js","sourcesContent":["/**\n * 格式化页码\n */\nconst getFromReq = (query = {}, defaultLimit) => {\n  let offset = parseInt(query.offset, 10)\n  if (isNaN(offset) || offset < 0) {\n    offset = 0\n  }\n  let limit = parseInt(query.limit, 10)\n  if (isNaN(limit) || limit === 0 || limit < -1 || limit > defaultLimit) {\n    limit = defaultLimit\n  }\n  return {\n    offset,\n    limit\n  }\n}\n\nconst getMeta = (totalLength, currentLength, pagination) => {\n  return {\n    offset: pagination.offset,\n    limit: pagination.limit,\n    total: totalLength,\n    length: currentLength,\n    remaining: currentLength === 0 ? 0 : totalLength - pagination.offset - currentLength\n  }\n}\n\nexport {\n  getFromReq,\n  getMeta\n}\n"]}